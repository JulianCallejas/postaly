import{r as n,R as e,a as t,l as r}from"./vendor-other-CQ_mfTz-.js";function o(e,t){const r=n.useRef(t);n.useEffect((function(){t!==r.current&&null!=e.attributionControl&&(null!=r.current&&e.attributionControl.removeAttribution(r.current),null!=t&&e.attributionControl.addAttribution(t)),r.current=t}),[e,t])}const u=n.createContext(null),c=u.Provider;function a(){const e=n.useContext(u);if(null==e)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function i(e,t){const r=n.useRef();n.useEffect((function(){return null!=t&&e.instance.on(t),r.current=t,function(){null!=r.current&&e.instance.off(r.current),r.current=null}}),[e,t])}function l(n,e){const t=n.pane??e.pane;return t?{...n,pane:t}:n}function s(n,e,t){return Object.freeze({instance:n,context:e,container:t})}function f(e,t){return null==t?function(t,r){const o=n.useRef();return o.current||(o.current=e(t,r)),o}:function(r,o){const u=n.useRef();u.current||(u.current=e(r,o));const c=n.useRef(r),{instance:a}=u.current;return n.useEffect((function(){c.current!==r&&(t(a,r,c.current),c.current=r)}),[a,r,o]),u}}function p(e){return function(t){const r=a(),u=e(l(t,r),r);return o(r.map,t.attribution),i(u.current,t.eventHandlers),function(e,t){n.useEffect((function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){t.layerContainer?.removeLayer(e.instance),t.map.removeLayer(e.instance)}}),[t,e])}(u.current,r),u}}function d(){return a().map}function m(e){const t=d();return n.useEffect((function(){return t.on(e),function(){t.off(e)}}),[t,e]),t}function y(){return y=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},y.apply(this,arguments)}function v({bounds:t,boundsOptions:o,center:u,children:a,className:i,id:l,placeholder:s,style:f,whenReady:p,zoom:d,...m},v){const[b]=n.useState({className:i,id:l,style:f}),[g,x]=n.useState(null);n.useImperativeHandle(v,(()=>g?.map??null),[g]);const C=n.useCallback((n=>{if(null!==n&&null===g){const e=new r.Map(n,m);null!=u&&null!=d?e.setView(u,d):null!=t&&e.fitBounds(t,o),null!=p&&e.whenReady(p),x(function(n){return Object.freeze({__version:1,map:n})}(e))}}),[]);n.useEffect((()=>()=>{g?.map.remove()}),[g]);const O=g?e.createElement(c,{value:g},a):s??null;return e.createElement("div",y({},b,{ref:C}),O)}const b=n.forwardRef(v),g=function(t){function r(r,o){const{instance:u,context:a}=t(r).current;return n.useImperativeHandle(o,(()=>u)),null==r.children?null:e.createElement(c,{value:a},r.children)}return n.forwardRef(r)}(p(f((function({position:n,...e},t){const o=new r.Marker(n,e);return s(o,(u=t,c={overlayContainer:o},Object.freeze({...u,...c})));var u,c}),(function(n,e,t){e.position!==t.position&&n.setLatLng(e.position),null!=e.icon&&e.icon!==t.icon&&n.setIcon(e.icon),null!=e.zIndexOffset&&e.zIndexOffset!==t.zIndexOffset&&n.setZIndexOffset(e.zIndexOffset),null!=e.opacity&&e.opacity!==t.opacity&&n.setOpacity(e.opacity),null!=n.dragging&&e.draggable!==t.draggable&&(!0===e.draggable?n.dragging.enable():n.dragging.disable())}))));const x=function(e,r){const u=function(n,e){return function(t,r){const u=a(),c=n(l(t,u),u);return o(u.map,t.attribution),i(c.current,t.eventHandlers),e(c.current,u,t,r),c}}(f(e),r);return function(e){function r(r,o){const[u,c]=n.useState(!1),{instance:a}=e(r,c).current;n.useImperativeHandle(o,(()=>a)),n.useEffect((function(){u&&a.update()}),[a,u,r.children]);const i=a._contentNode;return i?t.createPortal(r.children,i):null}return n.forwardRef(r)}(u)}((function(n,e){return s(new r.Popup(n,e.overlayContainer),e)}),(function(e,t,{position:r},o){n.useEffect((function(){const{instance:n}=e;function u(e){e.popup===n&&(n.update(),o(!0))}function c(e){e.popup===n&&o(!1)}return t.map.on({popupopen:u,popupclose:c}),null==t.overlayContainer?(null!=r&&n.setLatLng(r),n.openOn(t.map)):t.overlayContainer.bindPopup(n),function(){t.map.off({popupopen:u,popupclose:c}),t.overlayContainer?.unbindPopup(),t.map.removeLayer(n)}}),[e,t,o,r])})),C=function(e,t){return function(e){function t(t,r){const{instance:o}=e(t).current;return n.useImperativeHandle(r,(()=>o)),null}return n.forwardRef(t)}(p(f(e,t)))}((function({url:n,...e},t){return s(new r.TileLayer(n,l(e,t)),t)}),(function(n,e,t){!function(n,e,t){const{opacity:r,zIndex:o}=e;null!=r&&r!==t.opacity&&n.setOpacity(r),null!=o&&o!==t.zIndex&&n.setZIndex(o)}(n,e,t);const{url:r}=e;null!=r&&r!==t.url&&n.setUrl(r)}));export{b as M,x as P,C as T,g as a,m as b,d as u};
